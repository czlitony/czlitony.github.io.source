---
title: vim命令
categories : vim
tags : [linux,vim]
date : 2016-08-02 14:38:30
---

这一部分主要介绍vim常用用法。

<!-- more -->

## 简介
Vim（Vi[Improved]）编辑器是功能强大的跨平台文本文件编辑工具，继承自Unix系统的Vi编辑器，支持Linux/Mac OS X/Windows系统，利用它可以建立、修改文本文件。进入Vim编辑程序，可以在终端输入下面的命令：
```
	vim [filename]
```
其中filename是要编辑器的文件的路径名。如果文件不存在，它将为你建立一个新文件。Vim编辑程序有三种操作模式，分别称为**普通模式**、**插入模式** 、 **命令模式** 和 **可视模式**，当运行Vim时，首先进入普通模式。

## 普通模式
### 跳转
```
k                上移；
j                下移；
h                左移；
l                右移；
ctrl+f        	 在文件中前移一页（相当于 page down）；
ctrl+b           在文件中后移一页（相当于 page up）；
*                当光标停留在一个单词上，该键会在文件内搜索该单词，并跳转到下一处；
#                当光标停留在一个单词上，该键在文件内搜索该单词，并跳转到上一处；
gg               将光标定位到文件第一行起始位置；
G                将光标定位到文件最后一行起始位置；
NG/Ngg           将光标定位到第 N 行的起始位置。
H                将光标移到屏幕上的起始行（或最上行）；
M                将光标移到屏幕中间；
L                将光标移到屏幕最后一行;
w                右移光标到下一个字的开头；
e                右移光标到一个字的末尾；
b                左移光标到前一个字的开头；
0                数字０，左移光标到本行的开始；
$                右移光标，到本行的末尾；
^                移动光标，到本行的第一个非空字符。
```
### 搜索匹配
```
/str1            正向搜索字符串 str1；
n                继续搜索，找出 str1 字符串下次出现的位置；
N                继续搜索，找出 str1 字符串上一次出现的位置；
?str2            反向搜索字符串 str2 。
```
搜索时忽略大小写：
```
:set ignorecase  忽略大小写
:set noignorecase大小写敏感
/\cstr1          忽略大小写
/\Cstr1          大小写敏感
```
### 替换和删除
```
x                删除光标所指向的当前字符；
dw               删除光标右侧的字；
db               删除光标左侧的字；
dd               删除光标所在行，并去除空隙；
ndd              删除（剪切） n 行内容，并去除空隙；
d$               从当前光标起删除字符直到行的结束；
d0               从当前光标起删除字符直到行的开始；
J                删除本行的回车符（CR），并和下一行合并；
s                用输入的正文替换光标所指向的字符；
S                删除当前行，并进入插入模式；
c$               用输入的正文替换从光标开始到本行末尾的所有字符；
c0               用输入的正文替换从本行开头到光标的所有字符。
```
### 复制粘贴
```
p                小写字母 p，将缓冲区的内容粘贴到光标的后面；
P                大写字母 P，将缓冲区的内容粘贴到光标的前面；
yy               复制当前行到内存缓冲区；
nyy              复制 n 行内容到内存缓冲区；
```

### 撤销和重复
```
u                撤消前一条命令的结果；
.                重复最后一条修改正文的命令。
```
## 插入模式
### 进入插入模式
```
i            	 在光标左侧插入正文;
a            	 在光标右侧插入正文;
o            	 在光标所在行的下一行增添新行;
O            	 在行的上一行增添新行;
I            	 在行的开头插入;
A            	 在行的末尾插入。
```
### 退出插入模式
```
ESC 
Ctrl+[
```

## 命令模式
### 打开、保存、退出
```
:e file_temp	 在已经启动的Vim中打开一个文件;
:q               在未作修改的情况下退出；
:q!              放弃所有修改，退出编辑程序；
:w               保存；
:w file_temp	 将当前文件另存为 file_temp。
```
### 行号与文件
```
:n               将光标移到第 n 行
```
### 恢复文件
Vim 在编辑某个文件时，会另外生成一个临时文件，这个文件的名称通常以 . 开头，并以 .swp 结尾。Vim 在正常退出时，该文件被删除，若意外退出，而没有保存文件的最新修改内容，则可以使用恢复命令 :recover 来恢复文件，也可以在启动Vim时用 -r 选项。
### 选项设置
```
autoindent       设置该选项，则正文自动缩进;
ignorecase       设置该选项，则忽略规则表达式中大小写字母的区别;
number           设置该选项，则显示正文行号;
ruler            设置该选项，则在屏幕底部显示光标所在行、列的位置;
tabstop          设置按 Tab 键跳过的空格数。例如 :set tabstop=n，n 默认值为 8。
```
### Shell切换
```
:!shell_command 执行完 shell_command 后回到Vim
```

## 可视模式
```
v               进入,一个字符一个字符地选;
V               进入，一行一行地选;
ctrl-v          进入，选中屏幕上的一个矩形区域;
d               删除所选中的部分;
D               删除所选中部分所在的行;
y               复制选中的部分;
Y               复制选中部分所在的行;
>               所选中的部分都缩进一个tab;
=               在所选中的部分删除一个tab的缩进;
c               会把选中的内容删除并进入插入模式;
C               会直接删除选中的内容所在的行并进入插入模式。
```